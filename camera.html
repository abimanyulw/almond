<!DOCTYPE html><html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Almond Polaroid Cam</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Yeseva+One&display=swap" rel="stylesheet">
<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
    <style>
        :root{
  --bg-dark: #1E2A36;
  --almond: #D6A889;
  --accent: rgba(214,168,137,0.12);
  --glass: rgba(255,255,255,0.04);
  --text: #F6EDE2;
  --muted: rgba(214,168,137,0.85);
  --controls-gap: 12px;
  --filters-height: 110px;
}

/* Reset & base */
*{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
html{min-height:100%; scroll-behavior:smooth;}
body{
  min-height:100vh;
  margin:0;
  padding:24px 16px calc(var(--filters-height) + 40px); /* beri ruang bawah supaya filters tidak menutup konten */
  font-family:"Josefin Sans",sans-serif;
  color:var(--text);
  background:
    radial-gradient(1000px 600px at 8% 8%, rgba(214,168,137,0.03), transparent 12%),
    linear-gradient(180deg,#0f1620 0%, var(--bg-dark) 55%);
  background-attachment: fixed;
  background-size: cover;
  -webkit-touch-callout:none; -webkit-user-select:none; user-select:none;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* header/title */
h1{
  margin:10px 0 14px;
  font-family:"Yeseva One",serif;
  font-size:30px;
  font-weight:400;
  color:var(--almond);
  text-align:center;
  text-shadow:0 3px 12px rgba(0,0,0,0.45);
}

/* main camera area wrapper */
#area { width:100%; max-width:920px; display:flex; flex-direction:column; align-items:center; gap:16px; }

/* video / canvas container with 4:3 aspect using aspect-ratio */
div[style*="position: relative"]{
  width:100%;
  max-width:920px;
  aspect-ratio: 4 / 3;
  position: relative;
  border-radius:12px;
  overflow:hidden;
  box-shadow: 0 18px 50px rgba(2,6,12,0.7);
  background: linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.06));
}

/* video & canvas fill the container */
video, canvas {
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
  -webkit-transform: translateZ(0);
}

/* timer overlay */
.timer-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: clamp(36px, 6vw, 64px);
  font-weight:700;
  color: var(--text);
  background: rgba(30,42,54,0.64);
  padding: 12px 20px;
  border-radius: 10px;
  display: none;
  backdrop-filter: blur(4px);
  text-shadow: 0 4px 18px rgba(0,0,0,0.6);
  z-index: 20;
}

/* controls layout */
.controls {
  width:100%;
  max-width:920px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:var(--controls-gap);
  margin-top:6px;
}

/* button style */
button {
  font-family:"Josefin Sans",sans-serif;
  font-weight:600;
  font-size:18px;
  background: linear-gradient(180deg, rgba(214,168,137,0.98), rgba(214,168,137,0.92));
  color: var(--bg-dark);
  padding:10px 16px;
  border-radius:12px;
  border: none;
  cursor:pointer;
  box-shadow: 0 10px 26px rgba(214,168,137,0.08);
  transition: transform 140ms ease, box-shadow 140ms ease, opacity 120ms ease;
  min-width:160px;
}

/* secondary button (upload) - dark variant */
.controls button:nth-child(3){
  background: var(--bg-dark);
  color: var(--almond);
  border-radius:10px;
}

/* hover / active */
button:hover{ transform: translateY(-4px); box-shadow: 0 18px 40px rgba(214,168,137,0.14); }
button:active{ transform: translateY(-1px) scale(.996); box-shadow: 0 8px 20px rgba(0,0,0,0.55); }
button:focus{ outline: 3px solid rgba(214,168,137,0.18); outline-offset:4px; border-radius:12px; }

/* hide native file input visually but keep accessible */
input[type="file"]{ position: absolute; left:-9999px; width:1px; height:1px; opacity:0; }

/* filters bar fixed at bottom */
.filters-container{
  position: fixed;
  left: 12px;
  right: 12px;
  bottom: 12px;
  height: var(--filters-height);
  background: linear-gradient(180deg, rgba(30,42,54,0.98), rgba(30,42,54,0.95));
  border-radius: 14px;
  display:flex;
  align-items:center;
  padding: 12px;
  box-shadow: 0 18px 50px rgba(2,6,12,0.6);
  z-index: 60;
  overflow: hidden;
  border: 1px solid var(--accent);
}

/* inner scroll area */
.filters {
  display:flex;
  gap:12px;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom:4px;
  width:100%;
  align-items:center;
}

/* single filter option */
.filter-option{ display:flex; flex-direction:column; align-items:center; gap:8px; min-width:92px; cursor:pointer; }
.filter-option img{
  width:88px;
  height:64px;
  object-fit:cover;
  border-radius:8px;
  border: 3px solid transparent;
  box-shadow: 0 6px 18px rgba(0,0,0,0.45);
  transition: transform 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
}
.filter-option span{ font-size:12px; color: var(--text); text-align:center; white-space:nowrap; }

/* active preview style will be applied by click feedback â€” provide focus style */
.filter-option:focus-within img,
.filter-option:hover img{
  transform: translateY(-6px) scale(1.03);
  border-color: rgba(214,168,137,0.22);
  box-shadow: 0 14px 36px rgba(2,6,12,0.6);
}

/* small screens adjustments */
@media (max-width:520px){
  body{ padding:18px 12px calc(var(--filters-height) + 34px); }
  h1{ font-size:22px; }
  .filter-option img{ width:72px; height:54px; }
  button{ font-size:16px; min-width:140px; padding:10px 12px; }
  .timer-overlay{ font-size: clamp(28px, 10vw, 48px); padding:10px 14px; }
}

/* accessibility and links */
a, a:visited { color: var(--almond); text-decoration: none; }
    </style>
</head>
<body>
    <span id="area">
        <span id="header"></span>
    <h1>Take Your Best Picture</h1>
    <div style="position: relative; display: inline-block;">
        <video id="video" autoplay class="filtered" playsinline></video>
        <canvas id="canvas" style="display:none;"></canvas>
        <div id="timer" class="timer-overlay"></div>
    </div>
    <div class="controls">
        <button onclick="toggleCamera()">Switch Camera</button>
        <button onclick="startCaptureTimer()">Take Photo</button>
        <br><br><input type="file" id="imageUpload" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
<button onclick="document.getElementById('imageUpload').click();">Upload Image</button>

    </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></span>
    <div class="filters-container">
        <div class="filters" id="filterPreviews"></div>
    </div>
    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const filterPreviews = document.getElementById('filterPreviews');
        const timerDisplay = document.getElementById('timer');
        let currentFilter = 'none';
        let useFrontCamera = true;
        let currentStream = null;async function startCamera() {
        try {
            if (currentStream) {
                currentStream.getTracks().forEach(track => track.stop());
            }
            const constraints = { video: { facingMode: useFrontCamera ? 'user' : 'environment', width: 1024,
            height: 768 } };
            const stream = await navigator.mediaDevices.getUserMedia(constraints);
            currentStream = stream;
            video.srcObject = stream;
        } catch (err) {
            console.error('Error accessing camera:', err);
        }
    }

    function toggleCamera() {
        useFrontCamera = !useFrontCamera;
        startCamera();
    }

    startCamera();

    const filters = {
        'Normal': 'none',
        'Icy Water': 'brightness(104%) contrast(104%) grayscale(0%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(122%) sepia(0%)',
        'Summer Heat': 'brightness(103%) contrast(114%) grayscale(0%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(122%) sepia(0%)',
        'Fever': 'contrast(97%) grayscale(0%) hue-rotate(330deg) invert(0%) opacity(100%) saturate(111%) sepia(0%)',
        'Strawberry': 'grayscale(0%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(100%) sepia(0%)',
        'Ibiza': 'contrast(107%) grayscale(0%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(165%) sepia(50%)',
        'Sweet Sunset': 'contrast(128%) grayscale(0%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(120%) sepia(0%)',
        'Blue Rock': 'contrast(128%) grayscale(100%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(120%) sepia(0%)',
        'Ocean Wave': 'brightness(105%) contrast(104%) grayscale(10%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(100%) sepia(50%)',
        'Little Red':'brightness(105%) contrast(106%) grayscale(0%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(90%) sepia(0%)',
        'Vintage May':'brightness(105%)  grayscale(100%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(100%) sepia(50%)',
        'Space Trip':'grayscale(50%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(140%) sepia(0%)',
        'Desert Morning':'brightness(110%) contrast(114%) grayscale(0%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(122%) sepia(0%)',
        'Blue Lagoon':' brightness(104%) contrast(104%) grayscale(0%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(122%) sepia(0%)',
        'Warm Ice':'brightness(110%) contrast(116%) grayscale(0%) hue-rotate(342deg) invert(0%) opacity(100%) saturate(84%) sepia(0%)',
        'Burnt Coffee':'contrast(80%) grayscale(100%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(100%) sepia(0%)',
        'Waterness':'contrast(128%) grayscale(100%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(120%) sepia(0%)',
        'Old Wood':'brightness(105%) contrast(102%) grayscale(50%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(140%) sepia(9%)',
        'Distant Mountain':'contrast(120%) grayscale(100%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(100%) sepia(0%)',
        'Coal Paper':'brightness(90%) contrast(125%) grayscale(100%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(100%) sepia(50%)',
        'Simple Gray':'grayscale(100%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(100%) sepia(0%)',
        'Leaf':'contrast(79%) grayscale(100%) hue-rotate(0deg) invert(0%) opacity(100%) saturate(100%) sepia(0%)',
    };

    function applyFilter(filter) {
        currentFilter = filter;
        video.style.filter = filters[filter] || 'none';
    }

    function startCaptureTimer() {
        let count = 5;
        timerDisplay.style.display = 'block';
        timerDisplay.textContent = count;

        const countdown = setInterval(() => {
            count--;
            if (count > 0) {
                timerDisplay.textContent = count;
            } else {
                clearInterval(countdown);
                timerDisplay.style.display = 'none';
                capturePhoto();
            }
        }, 1000);
    }

    function capturePhoto() {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.filter = video.style.filter;
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        const imageData = canvas.toDataURL('image/png');
        localStorage.setItem('capturedImage', imageData);
        window.location.href = 'step2.html';
    }
function handleImageUpload(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            localStorage.setItem('capturedImage', e.target.result);
            window.location.href = 'step2.html';
        };
        reader.readAsDataURL(file);
    }
}

    function generateFilterPreviews() {
        Object.keys(filters).forEach(filter => {
            const div = document.createElement('div');
            div.classList.add('filter-option');
            div.onclick = () => applyFilter(filter);
            
            const img = document.createElement('img');
            img.src = '1172.jpg';
            img.style.filter = filters[filter];
            
            const span = document.createElement('span');
            span.textContent = filter.replace('-', ' ');
            
            div.appendChild(img);
            div.appendChild(span);
            filterPreviews.appendChild(div);
        });
    }

    generateFilterPreviews();
</script>

</body>
</html>

